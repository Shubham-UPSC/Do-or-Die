<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OFFICER IN MAKING ‚Äì Discipline System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#0b1020; --card:#111827;
  --blue:#38bdf8; --green:#22c55e;
  --yellow:#facc15; --red:#ef4444;
  --purple:#a78bfa;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:'Segoe UI',system-ui;
  background:radial-gradient(circle at top,var(--card),var(--bg));
  color:#e5e7eb;padding:20px;
}
.container{
  max-width:1200px;margin:auto;
  background:linear-gradient(180deg,#111827,#020617);
  border-radius:18px;padding:28px;
  box-shadow:0 0 60px rgba(56,189,248,.15);
}
h1{
  text-align:center;font-size:2.2rem;
  background:linear-gradient(90deg,var(--blue),var(--purple));
  -webkit-background-clip:text;color:transparent;
}
.subtitle{text-align:center;color:#94a3b8;margin-bottom:30px}

.dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:18px
}
.card{
  background:linear-gradient(180deg,#020617,#111827);
  border-radius:16px;padding:20px;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.05);
}
.card h3{margin-top:0;color:var(--blue)}
.big{font-size:2.2rem;font-weight:700}

.progress-bar{height:16px;background:#020617;border-radius:10px;overflow:hidden}
.progress-fill{height:100%;transition:.4s}

button,input,textarea,select{
  background:#020617;color:white;
  border:1px solid #1f2937;border-radius:10px;
  padding:8px;font-size:.95rem
}
button{
  cursor:pointer;
  background:linear-gradient(135deg,var(--blue),var(--purple));
  border:none;font-weight:600
}
button.danger{background:var(--red)}

.tabs{display:flex;gap:10px;overflow-x:auto;margin:30px 0 10px}
.tab{padding:8px 14px;border-radius:20px;background:#020617;cursor:pointer}
.tab.active{background:linear-gradient(90deg,var(--blue),var(--purple))}

.week{display:none}
.week.active{display:block}

.topic{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
  margin:6px 0
}
.topic label{flex:1}

.badge{
  padding:4px 10px;border-radius:999px;font-size:.75rem;font-weight:600
}
.green{background:rgba(34,197,94,.15);color:var(--green)}
.yellow{background:rgba(250,204,21,.15);color:var(--yellow)}
.red{background:rgba(239,68,68,.15);color:var(--red)}

table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:6px;text-align:center;border-bottom:1px solid #1f2937}
th{color:#94a3b8}

footer{text-align:center;margin-top:40px;color:#64748b}
</style>
</head>

<body>
<div class="container">

<h1>OFFICER IN MAKING</h1>
<p class="subtitle">Discipline beats motivation ‚Ä¢ System beats emotion</p>

<!-- DASHBOARD -->
<div class="dashboard">
  <div class="card">
    <h3>Overall Progress</h3>
    <div class="big"><span id="percent">0</span>%</div>
    <div class="progress-bar"><div id="overallBar" class="progress-fill"></div></div>
    <p><span id="hours">0</span> / 784 hours</p>
  </div>

  <div class="card">
    <h3>Streak</h3>
    <div class="big">üî• <span id="streak">0</span></div>
    <p id="todayStatus">Today not logged ‚ùå</p>
  </div>

  <div class="card">
    <h3>Mock Readiness</h3>
    <div class="big" id="mockStatus">üî¥ Low</div>
    <p>System-evaluated (cutoff hidden)</p>
  </div>

  <div class="card">
    <h3>Daily Log</h3>
    <p id="dateTime" style="color:#94a3b8;font-size:.9rem"></p>
    <input type="number" id="logHours" placeholder="Hours today (1‚Äì15)">
    <button onclick="logDay()">Log Day</button>
    <button class="danger" onclick="resetToday()">Reset Today</button>
  </div>
</div>

<!-- WEEKLY SYLLABUS -->
<div class="card" style="margin-top:30px">
<h3>üî• Weekly Syllabus Command (Strict)</h3>
<div class="tabs" id="tabs"></div>
<div id="weeks"></div>
</div>

<!-- MOCK SYSTEM -->
<div class="card" style="margin-top:30px">
<h3>üß™ Mock Analysis</h3>

<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px">
  <select id="mockType"><option>GS</option><option>CSAT</option></select>
  <input id="mockTotal" placeholder="Total Marks">
  <input id="mockScore" placeholder="Marks Obtained">
  <button onclick="addMock()">Add Mock</button>
  <button class="danger" onclick="resetMocks()">Reset</button>
</div>

<p style="margin-top:10px">
Attempts: <b id="mCount">0</b> |
Avg: <b id="mAvg">‚Äî</b>% |
Best: <b id="mBest">‚Äî</b>% |
Trend: <b id="mTrend">‚Äî</b>
</p>

<table>
<thead><tr><th>#</th><th>Type</th><th>%</th><th>‚ùå</th></tr></thead>
<tbody id="mockTable"></tbody>
</table>

<canvas id="chart" height="120" style="margin-top:20px"></canvas>
</div>

<!-- NOTES -->
<div class="card" style="margin-top:20px">
<h3>Daily Reflection (Autosaved)</h3>
<textarea id="notes"></textarea>
</div>

<footer>Revision ‚Üí Mocks ‚Üí Analysis ‚Üí Rank</footer>
</div>

<script>
/* ================= DATA ================= */
const TOTAL = 784;
let data = JSON.parse(localStorage.getItem("officerInMaking")) || {
  hours:0, todayHours:0, streak:0, last:null,
  weeklyTopics:{}, revisionDone:{},
  mocks:[], notes:""
};

/* ================= CLOCK ================= */
function updateClock(){
  const n=new Date();
  dateTime.textContent =
    n.toLocaleDateString('en-IN',{weekday:'long',day:'numeric',month:'long',year:'numeric'}) +
    " ‚Ä¢ " + n.toLocaleTimeString();
}
setInterval(updateClock,1000); updateClock();

/* ================= DAILY LOG (15 HR CAP) ================= */
function logDay(){
  const h=+logHours.value;
  if(!h||h<1||h>15) return alert("Enter 1‚Äì15 hrs");

  if(data.todayHours + h > 15){
    alert("Daily cap of 15 hrs reached.");
    return;
  }

  const today=new Date().toDateString();
  if(data.last!==today){
    const y=new Date(); y.setDate(y.getDate()-1);
    data.streak=(data.last===y.toDateString())?data.streak+1:1;
    data.todayHours=0;
    data.last=today;
  }
  data.todayHours+=h;
  data.hours+=h;
  logHours.value="";
  save(); update();
}

function resetToday(){
  const today=new Date().toDateString();
  if(data.last!==today) return alert("No log today");
  if(confirm("Reset today's log?")){
    data.hours-=data.todayHours;
    data.todayHours=0;
    data.last=null;
    data.streak=Math.max(0,data.streak-1);
    save(); update();
  }
}

/* ================= SYLLABUS (FULL, AUDITED) ================= */
const syllabus = [
  {name:"Week 1 ‚Äì Polity: Constitution",topics:[
    {t:"Historical background (1773‚Äì1947)",h:6},
    {t:"Constituent Assembly",h:4},
    {t:"Preamble & philosophy",h:4},
    {t:"Salient features",h:3},
    {t:"Union & Territory",h:2},
    {t:"Citizenship",h:3},
    {t:"Fundamental Rights",h:12},
    {t:"DPSP",h:5},
    {t:"Fundamental Duties",h:2},
    {t:"Basic Structure doctrine",h:3},
    {t:"Polity PYQs",h:5}
  ]},
  {name:"Week 2 ‚Äì Polity: Governance",topics:[
    {t:"President & Vice-President",h:6},
    {t:"PM & Council of Ministers",h:5},
    {t:"Parliament",h:8},
    {t:"Federalism",h:6},
    {t:"Judiciary",h:6},
    {t:"Constitutional bodies",h:4},
    {t:"Local governance",h:4}
  ]},
  {name:"Week 3 ‚Äì Modern History",topics:[
    {t:"1857 Revolt",h:6},
    {t:"INC & nationalism",h:6},
    {t:"Gandhian era",h:10},
    {t:"Acts & reforms",h:5},
    {t:"Partition & integration",h:5}
  ]},
  {name:"Week 4 ‚Äì Geography",topics:[
    {t:"Physical geography",h:20},
    {t:"Climatology",h:10},
    {t:"Oceanography",h:10},
    {t:"World geography",h:10}
  ]},
  {name:"Week 5 ‚Äì Indian Geography",topics:[
    {t:"Physiography",h:10},
    {t:"Rivers & monsoon",h:12},
    {t:"Agriculture",h:10},
    {t:"Industries & maps",h:10}
  ]},
  {name:"Week 6 ‚Äì Economy Basics",topics:[
    {t:"GDP & inflation",h:10},
    {t:"Fiscal & monetary policy",h:14},
    {t:"Banking & RBI",h:14}
  ]},
  {name:"Week 7 ‚Äì Economy Development",topics:[
    {t:"Inclusive growth",h:14},
    {t:"Poverty & employment",h:14},
    {t:"Social sector",h:14}
  ]},
  {name:"Week 8 ‚Äì Environment",topics:[
    {t:"Ecology",h:14},
    {t:"Biodiversity",h:14},
    {t:"Climate change",h:14},
    {t:"Disaster management",h:14}
  ]},
  {name:"Week 9 ‚Äì Agriculture & IR",topics:[
    {t:"Agriculture basics",h:20},
    {t:"Food security",h:14},
    {t:"International relations",h:20}
  ]},
  {name:"Week 10 ‚Äì S&T + Security",topics:[
    {t:"Science & tech",h:28},
    {t:"Internal security",h:21}
  ]},
  {name:"Week 11 ‚Äì Society",topics:[
    {t:"Indian society",h:28},
    {t:"World history",h:21}
  ]},
  {name:"Week 12 ‚Äì Ethics",topics:[
    {t:"Ethics theory",h:21},
    {t:"Case studies",h:28}
  ]},
  {name:"Week 13 ‚Äì Revision I",topics:[
    {t:"GS revision",h:49}
  ]},
  {name:"Week 14 ‚Äì Revision II",topics:[
    {t:"CSAT + PYQs",h:49}
  ]},
  {name:"Week 15 ‚Äì Consolidation",topics:[
    {t:"Mocks + weak areas",h:49}
  ]},
  {name:"Week 16 ‚Äì Final Phase",topics:[
    {t:"Light revision + rest",h:49}
  ]}
];

/* ================= RENDER WEEKS ================= */
const tabs=document.getElementById("tabs");
const weeksDiv=document.getElementById("weeks");

syllabus.forEach((wk,i)=>{
  const tab=document.createElement("div");
  tab.className="tab"; tab.textContent=`W${i+1}`;
  tab.onclick=()=>openWeek(i);
  tabs.appendChild(tab);

  const div=document.createElement("div");
  div.className="week";
  div.innerHTML=`<h4>${wk.name}</h4>`;

  wk.topics.forEach(tp=>{
    const id=wk.name+tp.t;
    div.innerHTML+=`
      <div class="topic">
        <label>
          <input type="checkbox" ${data.weeklyTopics[id]?'checked':''}
          onchange="toggleTopic('${id}')"> ${tp.t}
        </label>
        <span class="badge yellow">${tp.h}h</span>
      </div>`;
  });

  div.innerHTML+=`
    <button onclick="markRevision(${i})">Mark Revision Done</button>
    <span class="badge ${data.revisionDone[i]?'green':'red'}">
      Revision: ${data.revisionDone[i]?'Done':'Pending'}
    </span>`;
  weeksDiv.appendChild(div);
});

function openWeek(i){
  if(i>0){
    const prev=syllabus[i-1];
    const done=prev.topics.filter(tp=>data.weeklyTopics[prev.name+tp.t]).length;
    if(done/prev.topics.length<0.8 || !data.revisionDone[i-1] || data.mocks.length<Math.max(1,i-2)){
      alert("üîí Week locked. Complete syllabus + revision + mocks.");
      return;
    }
  }
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.querySelectorAll(".week").forEach(w=>w.classList.remove("active"));
  tabs.children[i].classList.add("active");
  weeksDiv.children[i].classList.add("active");
}
function toggleTopic(id){data.weeklyTopics[id]=!data.weeklyTopics[id];save();}
function markRevision(i){data.revisionDone[i]=true;save();}

/* ================= MOCK SYSTEM ================= */
function addMock(){
  const t=+mockTotal.value, s=+mockScore.value;
  if(!t||!s||s>t) return alert("Invalid marks");
  data.mocks.push({type:mockType.value,percent:(s/t*100)});
  save(); renderMocks();
}
function deleteMock(i){data.mocks.splice(i,1); save(); renderMocks();}
function resetMocks(){ if(confirm("Reset all mocks?")){ data.mocks=[]; save(); renderMocks(); } }

function renderMocks(){
  mockTable.innerHTML="";
  const p=data.mocks.map(m=>m.percent);
  data.mocks.forEach((m,i)=>{
    mockTable.innerHTML+=`
      <tr><td>${i+1}</td><td>${m.type}</td>
      <td>${m.percent.toFixed(1)}%</td>
      <td><button class="danger" onclick="deleteMock(${i})">‚úñ</button></td></tr>`;
  });
  mCount.textContent=p.length;
  mAvg.textContent=p.length?(p.reduce((a,b)=>a+b)/p.length).toFixed(1):"‚Äî";
  mBest.textContent=p.length?Math.max(...p).toFixed(1):"‚Äî";
  mTrend.textContent=p.length<3?"‚Äî":(p.at(-1)>p.at(-3)?"‚Üë":"‚Üì");
  updateMockStatus(); drawChart();
}

function updateMockStatus(){
  const avg=data.mocks.reduce((a,b)=>a+b.percent,0)/(data.mocks.length||1);
  mockStatus.textContent=avg>65?"üü¢ Good":avg>50?"üü° Moderate":"üî¥ Low";
}

let chart;
function drawChart(){
  chart?.destroy();
  chart=new Chart(document.getElementById("chart"),{
    type:"line",
    data:{labels:data.mocks.map((_,i)=>`M${i+1}`),
    datasets:[{data:data.mocks.map(m=>m.percent),borderColor:"#38bdf8"}]}
  });
}

/* ================= UPDATE & SAVE ================= */
function update(){
  percent.textContent=Math.round(data.hours/TOTAL*100);
  hours.textContent=data.hours;
  streak.textContent=data.streak;
  todayStatus.textContent=data.last===new Date().toDateString()?"Today logged ‚úÖ":"Today not logged ‚ùå";
  overallBar.style.width=(data.hours/TOTAL*100)+"%";
  notes.value=data.notes;
}
notes.oninput=()=>{data.notes=notes.value;save();}
function save(){localStorage.setItem("officerInMaking",JSON.stringify(data));}

openWeek(0); update(); renderMocks();
</script>
</body>
</html>
